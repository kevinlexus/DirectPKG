create table EXS.NOTIF
(
  id         NUMBER not null,
  guid       VARCHAR2(36),
  uniqnum    VARCHAR2(255),
  fk_pdoc    NUMBER not null,
  summa      NUMBER not null,
  fk_l_pay   NUMBER,
  dt         DATE not null,
  tguid      VARCHAR2(36),
  status     NUMBER default 0 not null,
  v          NUMBER default 1 not null,
  err        NUMBER,
  dt_crt     DATE default sysdate not null,
  dt_upd     DATE default sysdate not null,
  result     VARCHAR2(1024),
  fk_kwtp_mg NUMBER
)
tablespace DATA
  pctfree 10
  initrans 1
  maxtrans 255
  storage
  (
    initial 64K
    next 1M
    minextents 1
    maxextents unlimited
  );
comment on table EXS.NOTIF
  is 'Извещение исполнителя о принятии к исполнению распоряжения';
comment on column EXS.NOTIF.id
  is 'ID';
comment on column EXS.NOTIF.guid
  is 'GUID извещения во внешней системе';
comment on column EXS.NOTIF.uniqnum
  is 'Уникальный номер извещения во внешней системе';
comment on column EXS.NOTIF.fk_pdoc
  is 'FK на ПД';
comment on column EXS.NOTIF.summa
  is 'Сумма в рублях';
comment on column EXS.NOTIF.fk_l_pay
  is 'FK на платеж из L_PAY (на составляющую, MN или PP, где разбито только по периодам)';
comment on column EXS.NOTIF.dt
  is 'Дата внесения оплаты (в случае отсутствия: дата поступления средств)';
comment on column EXS.NOTIF.tguid
  is 'от ГИС ЖКХ Транспортный GUID';
comment on column EXS.NOTIF.status
  is 'Статус загрузки в ГИС (0-добавлено на загрузку, 1-загружено, 2-отменёно)';
comment on column EXS.NOTIF.v
  is 'Статус (1-действующее, 0-отменено)';
comment on column EXS.NOTIF.err
  is 'Код ошибки, при загрузке ПД в ГИС (0-нет ошибки, 1-есть)';
comment on column EXS.NOTIF.dt_crt
  is 'Дата создания записи';
comment on column EXS.NOTIF.dt_upd
  is 'Дата обновления записи';
comment on column EXS.NOTIF.result
  is 'Последний результат отправки';
comment on column EXS.NOTIF.fk_kwtp_mg
  is 'FK на платеж из KWTP (на составляющую, MN или PP, где разбито только по периодам)';
alter table EXS.NOTIF
  add constraint NOTIF_P primary key (ID)
  using index 
  tablespace DATA
  pctfree 10
  initrans 2
  maxtrans 255
  storage
  (
    initial 64K
    next 1M
    minextents 1
    maxextents unlimited
  );
alter table EXS.NOTIF
  add constraint NOTIF_F_KWTP_MG foreign key (FK_KWTP_MG)
  references C_KWTP_MG (ID) on delete set null;
alter table EXS.NOTIF
  add constraint NOTIF_F_PDOC foreign key (FK_PDOC)
  references EXS.PDOC (ID);

